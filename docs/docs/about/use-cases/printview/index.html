<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.122.0">
<link rel="canonical" type="text/html" href="https://butler.ptarmiganlabs.com/docs/about/use-cases/">
<link rel="alternate" type="application/rss&#43;xml" href="https://butler.ptarmiganlabs.com/docs/about/use-cases/index.xml">
<meta name="robots" content="noindex, nofollow">
<script defer data-domain="butler.ptarmiganlabs.com" src="https://plausible.io/js/script.js"></script>

<link rel="canonical" href="https://butler.ptarmiganlabs.com/docs/about/use-cases/" />



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Use cases | Butler</title>
<meta name="description" content="How can Butler be used?">
<meta property="og:title" content="Use cases" />
<meta property="og:description" content="How can Butler be used?" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://butler.ptarmiganlabs.com/docs/about/use-cases/" />

<meta itemprop="name" content="Use cases">
<meta itemprop="description" content="How can Butler be used?"><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Use cases"/>
<meta name="twitter:description" content="How can Butler be used?"/>




<link rel="preload" href="/scss/main.min.760be0d42a95747f7072e6cf9b47cc5c5c4d7715dd765fd062712100e6b3d9d8.css" as="style">
<link href="/scss/main.min.760be0d42a95747f7072e6cf9b47cc5c5c4d7715dd765fd062712100e6b3d9d8.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name">Butler</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    
  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/about/use-cases/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Use cases</h1>
<div class="lead">How can Butler be used?</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-0fe300dd97c12d5a5bae8a5bbe69a001">Retired use cases</a></li>


    
  

    </ul>


<div class="content">
      <ul>
<li><a href="#instant-notifications-when-reload-tasks-fail-or-are-stopped">Instant notifications when reload tasks fail or are stopped</a></li>
<li><a href="#forward-failed-reload-events-to-incident-management-systems-new-relic-signl4">Forward failed reload events to incident management systems (New Relic, Signl4)</a></li>
<li><a href="#use-influxdbgrafana-or-new-relic-to-track-butler-memory-usage">Use InfluxDB/Grafana or New Relic to track Butler memory usage</a></li>
<li><a href="#save-a-copy-of-the-complete-reload-log-for-all-failed-reload-tasks">Save a copy of the complete reload log for all failed reload tasks</a></li>
<li><a href="#start-reload-tasks-from-load-script-or-from-upstream-systems">Start reload tasks from load script or from upstream systems</a></li>
<li><a href="#start-any-reload-task-from-within-any-qlik-sense-or-web-app">Start any reload task from within any Qlik Sense or web app</a></li>
<li><a href="#start-reload-tasks-via-rest-api-based-on-task-tags-or-custom-properties">Start reload tasks via REST API based on task tags or custom properties</a></li>
<li><a href="#trigger-fullpartial-app-reloads-from-load-script-or-upstream-systems">Trigger full/partial app reloads from load script or upstream systems</a></li>
<li><a href="#flexible-scheduling-of-app-reloads-in-qlik-sense-enterprise-on-windows">Flexible scheduling of app reloads in Qlik Sense Enterprise on Windows</a></li>
<li><a href="#passing-parameters-between-reload-tasks">Passing parameters between reload tasks</a></li>
<li><a href="#storing-state-across-several-apps">Storing state across several apps</a>
<ul>
<li><a href="#time-to-live-ttl-for-key-value-pairs">Time-to-live (TTL) for key-value pairs</a></li>
</ul>
</li>
<li><a href="#make-new-data-reach-end-users-as-quickly-as-possible">Make new data reach end users as quickly as possible</a></li>
<li><a href="#using-mqtt-to-notify-downstream-systems-that-sense-is-done-processing-data">Using MQTT to notify downstream systems that Sense is done processing data</a></li>
<li><a href="#create-directories-copymovedelete-files">Create directories, copy/move/delete files</a></li>
<li><a href="#extract-metadata-for-apps">Extract metadata for apps</a></li>
<li><a href="#easily-post-messages-to-slack">Easily post messages to Slack</a></li>
<li><a href="#monitor-windows-services">Monitor Windows services</a></li>
</ul>
<h2 id="instant-notifications-when-reload-tasks-fail-or-are-stopped">Instant notifications when reload tasks fail or are stopped</h2>
<p><strong>Information about failing tasks</strong> can be sent as emails, to Microsoft Teams, Slack, as MQTT messages or outgoing webhooks.</p>
<p>Email, Slack and MS Teams notifications all use a templating concept where HTML/Markdown template files describe what the alert message should look like. Before the alert is sent the template is populated with actual data from the failed reload task.</p>
<p>Both subject and body of email can use the template fields.</p>
<p>For both Slack and Teams there are options to use more flexible/configurable alert formats and more basic pre-configured alerts.</p>
<p>The result is a very poweful tool for QSEoW sysadmins, who get real-time insight into what&rsquo;s happening with respect to task execution.</p>
<p>More info <a href="docs/getting-started/setup/reload-alerts/">here</a>.</p>
<h2 id="forward-failed-reload-events-to-incident-management-systems-new-relic-signl4">Forward failed reload events to incident management systems (New Relic, Signl4)</h2>
<p>Butler offers advanced failed reload alerts via Slack, Teams, email and outgoing webhooks.<br>
Configurable templates means you can customize emails/Teams/Slack messages.</p>
<p>Sometimes you want a bit more structure though.<br>
This is especially true when Sense is used in the enterprise.</p>
<p>Butler integrates with both <a href="https://www.signl4.com">Signl4</a> and <a href="https://newrelic.com">New Relic</a>.<br>
Both offer incident management features on both the web and via mobile clients.</p>
<p>Information about failed/aborted reloads can be sent to one or more New Relic accounts.<br>
Tags for the reload task and associated app is sent to New Relic as metadata for the event/log entry that&rsquo;s created there.</p>
<h2 id="use-influxdbgrafana-or-new-relic-to-track-butler-memory-usage">Use InfluxDB/Grafana or New Relic to track Butler memory usage</h2>
<p>Butler can be configured to log its own memory usage to <a href="https://www.influxdata.com/products/">InfluxDB</a>, from where it can be visualised using <a href="https://grafana.com">Grafana</a>.</p>
<p>If you prefer using <a href="https://newrelic.com">New Relic One</a> that&rsquo;s possible too - sending Butler memory metrics to New Relic is super simple: Just add your New Relic credentials in the YAML config file or as command line options when starting Butler and you&rsquo;re set.</p>
<h2 id="save-a-copy-of-the-complete-reload-log-for-all-failed-reload-tasks">Save a copy of the complete reload log for all failed reload tasks</h2>
<p>Let&rsquo;s say a scheduled reload task fails.</p>
<p>This can happen due to lots of reasons, from uncontrollable events that are impossible to predict to bugs in the script of a Sense app.</p>
<p>No matter what the cause is, as a Sense administrator you probably want to investigate the script reload logs.</p>
<p>Butler can send notifications (Slack, Teams, email, webhooks, &hellip;) when reloads fail.<br>
These notifications can include the last 20-30-40 lines of the script log and this usually gives a good idea of what caused the reload to fail.</p>
<p>But what if you want to look at the <em>complete</em> reload log of that failed app reload?</p>
<p>So far you would have to dig into the log directory on the Sense server, find that specific reload log among potentially thousands of other log files. Not very effective.</p>
<p>As of version 7.2 Butler can store a copy of the complete reload log in a directory that you specify.<br>
The log files are stored in separate directories, one for each date.<br>
This makes it easy to find the log file you are interested in.</p>
<h2 id="start-reload-tasks-from-load-script-or-from-upstream-systems">Start reload tasks from load script or from upstream systems</h2>
<p>Trigger Sense reload tasks from a reload script: This makes it possible to start different Sense tasks based on what data has been read from a database, what time of day it is etc.<br>
Starting a task from the reload script is as easy as <code>Call StartTask('fbf645f0-0c92-40a4-af9a-6e3eb1d3c35c')</code>.</p>
<p>Trigger Sense reloads from external systems: When new data is available in a source database, that database can trigger a reload in Sense, and the data is loaded from the database into Sense. This way delays caused by Sense polling for data are minimized and data arrives at end users as quickly as possible.</p>
<p>Starting reload tasks using REST API is described <a href="/docs/examples/start-task-from-rest/">here</a>.<br>
Using MQTT messages to achieve this is described <a href="/docs/examples/start-task-from-mqtt/">here</a>.</p>
<h2 id="start-any-reload-task-from-within-any-qlik-sense-or-web-app">Start any reload task from within any Qlik Sense or web app</h2>
<p>Some HTML and Javascript magic is also needed, but given Butler&rsquo;s start-task API it&rsquo;s pretty easy to set up a button in a Sense app (or any web app!) to start any Sense reload task.</p>
<p>This can for example be used to allow end users to start an Extract-Transform when they (the user) need refreshed data.</p>
<p>More info <a href="/docs/examples/start-task-from-rest/">here</a>.</p>
<h2 id="start-reload-tasks-via-rest-api-based-on-task-tags-or-custom-properties">Start reload tasks via REST API based on task tags or custom properties</h2>
<p>Using tags and/or custom properties to identify what tasks should be started can be easier than having to know the tasks IDs.
This both makes it easier for 3rd party systems to start Qlik Sense tasks and easier for Sense admins to manage which tasks should be startable by 3rd party systems.</p>
<p>More info in <a href="/docs/concepts/start-sense-tasks/">Concepts</a> and <a href="/docs/examples/start-task/">Examples</a> sections.</p>
<h2 id="trigger-fullpartial-app-reloads-from-load-script-or-upstream-systems">Trigger full/partial app reloads from load script or upstream systems</h2>
<p>Sometimes you just want to reload an app without also having to create a reload task.<br>
When it comes to partial app reloads it&rsquo;s not even possible to do these from a Sense reload task.</p>
<p>Butler&rsquo;s API makes prvovides a solution: Just pass in an app ID to reload together with task IDs of the tasks that should be started when the app is done reloading (different tasks can be started depending on app reload success or failure).</p>
<p>The partial reload feature is of special interest as it can be used to trigger faster  incremental execution of of Extract-Transform reload chains. Great for keeping data in Sense apps updated during the course of a day!</p>
<p>More info <a href="/docs/examples/sense-demo-apps/partial-loads/">here</a>.</p>
<h2 id="flexible-scheduling-of-app-reloads-in-qlik-sense-enterprise-on-windows">Flexible scheduling of app reloads in Qlik Sense Enterprise on Windows</h2>
<p>Using the scheduler built into Qlik Sense you can&rsquo;t for example create schedules that are limited to a parts of a day.<br>
This is a pretty common scenario though - you want to reload an app hourly from say 3 am to 3 pm.</p>
<p>You <em>can</em> set this up in Sense, but it involves creating <em>a lot</em> of triggers for the reload task, which becomes a nightmare to maintain.</p>
<p><a href="/docs/concepts/scheduler">Butler&rsquo;s task scheduler</a> is built on Cron, which has been used in Linux for decades. Battle proven and very flexible.</p>
<h2 id="passing-parameters-between-reload-tasks">Passing parameters between reload tasks</h2>
<p>This has always been hard both in QlikView and Sense.</p>
<p><a href="/docs/concepts/key-value/">Butler&rsquo;s key-value store</a> makes it much easier to pass values from one app to the next in a reload chain.</p>
<h2 id="storing-state-across-several-apps">Storing state across several apps</h2>
<p>The <a href="/docs/concepts/key-value/">key-value store</a> can also be used to keep state in general across several apps or parts of a Qlik Sense environment.</p>
<p>Maybe a Development cluster needs to share information in real time with the Test and Production clusters?<br>
Easily solved using Butler&rsquo;s key-value store.</p>
<p>A demo showing parameter passing between apps is found <a href="/docs/examples/reload-chaining/">here</a>.</p>
<h3 id="time-to-live-ttl-for-key-value-pairs">Time-to-live (TTL) for key-value pairs</h3>
<p>Key-value pairs can optionally be set up with a time-to-live (ttl) parameter. If ttl is set, the KV pair will auto-delete when the ttl expires.</p>
<p>The key-value store is described <a href="/docs/concepts/key-value/">here</a>.</p>
<h2 id="make-new-data-reach-end-users-as-quickly-as-possible">Make new data reach end users as quickly as possible</h2>
<p>See above. Have the upstream data source initiate Sense app reloads, either via Butler&rsquo;s REST API or via MQTT messages sent to Butler.</p>
<h2 id="using-mqtt-to-notify-downstream-systems-that-sense-is-done-processing-data">Using MQTT to notify downstream systems that Sense is done processing data</h2>
<p>Use Butler&rsquo;s API endpoints for MQTT handling to send and receive MQTT publish-subscribe messages.<br>
MQTT (and the pubsub concept in general) is a great way for systems to communicate reliably with each other.</p>
<p>A demo app is available, showing how MQTT messages can be sent from Sense load scripts. More info <a href="/docs/examples/sense-demo-apps/publish-to-mqtt/">here</a>.</p>
<h2 id="create-directories-copymovedelete-files">Create directories, copy/move/delete files</h2>
<p>In &ldquo;standard mode&rdquo; apps reloading in Qlik Sense Enterprise on Windows can&rsquo;t access the file system of the Sense servers. This is a good thing because it adds a lot of security.</p>
<p>From time to time you need to delete temp QVDs though, or copy or move data files from one directory to another.</p>
<p>Butler has REST API endpoints for these use cases, but as those endpoints are locked down to only work on specific, configurable directiories they don&rsquo;t result in the same security issues as seen in for example QlikView or Sense running in legacy mode.</p>
<p>More info <a href="/docs/examples/file-copy-move-delete/">here</a>.</p>
<h2 id="extract-metadata-for-apps">Extract metadata for apps</h2>
<p>Exporting apps as JSON can be very useful for backup purposes. Doing regular snapshots of all apps in a Sense cluster is a fast and space-effective way of keeping point-in-time backups.</p>
<p>The <a href="http://localhost:1313/docs/reference/rest-api/?operationsSorter=alpha">REST API documentation</a> has full docs for the <code>/v4/app/{appId}/dump</code> endpoint.</p>
<h2 id="easily-post-messages-to-slack">Easily post messages to Slack</h2>
<p>Slack messages can include full formatting (web links, text formatting etc), as well as &ldquo;poking&rdquo; users.<br>
I.e. notifying specific Slack users that they have a new message.</p>
<p>Can for example be used to notify user(s) that an app has reloaded with new data, or that some error condition has occured.</p>
<p>More info <a href="docs/examples/sense-demo-apps/post-to-slack/">here</a>.</p>
<h2 id="monitor-windows-services">Monitor Windows services</h2>
<p>If Butler is running on Windows (server or even desktop) it can monitor one or more Windows services.<br>
This feature is <strong>not</strong> available when running Butler on Linux, macOS or in Docker.</p>
<p>Monitoring here means tracking the services&rsquo; state and sending messages to email, InfluxDB, New Relic, MQTT, Webhooks, Slack or Teams when services stop or start.</p>
<p>It can for example be used to get alerts if a Qlik Sense service for some reason stops.<br>
The concept is not limited to Qlik Sense services though - any Windows service can be monitored.</p>

</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0fe300dd97c12d5a5bae8a5bbe69a001">1 - Retired use cases</h1>
    <div class="lead">Things that Butler used to do, but don&rsquo;t really care for any more&hellip;</div>
	<p>Some features age with grace, others don&rsquo;t.<br>
Here&rsquo;s a list of features that are candidates for removal from Butler, or that have already been removed.</p>
<h2 id="candidates-for-removal-in-coming-versions">Candidates for removal in coming versions</h2>
<h3 id="real-time-metrics-around-active-users">Real-time metrics around active users</h3>
<p>While a good idea in theory, Butler just wasn&rsquo;t the vehicle for this.</p>
<p>The way Butler approached this was to have Sense&rsquo;s log4net logging framework send UDP messages to Butler when users logged in/out or sessions started/ended. This certainly works (quite well in fact!), but it also has inherent issues.<br>
For example, when Butler was started it wouldn&rsquo;t capture currently active users or sessions - it was only after some event captured in the logs that Butler would update it&rsquo;s internal counters. This meant that it would take some time (sometimes quite long) until the metrics were even approaching the real number of users using Sense.</p>
<p>There was also the risk of Butler missing UDP messages and not registering the associated log event.</p>
<p>The affected API endpoints are:</p>
<p><a href="/docs/reference/rest-api/?operationsSorter=alpha">/v4/activeusercount</a><br>
<a href="/docs/reference/rest-api/?operationsSorter=alpha">/v4/activeusers</a></p>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Tip: Butler SOS</h4>

    <p>The shortcomings above lead to the creation of the Butler SOS project, which has over the years evolved into a very comprehensive open source tool for professional grade, real-time monitoring of Qlik Sense.</p>
<p>More information available at <a href="https://butler-sos.ptarmiganlabs.com">butler-sos.ptarmiganlabs.com</a>.</p>


</div>


</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="SenseOps mailing list" aria-label="SenseOps mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://ptarmiganlabs.com/#/portal/signup" aria-label="SenseOps mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Discussion forums on GitHub" aria-label="Discussion forums on GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/ptarmiganlabs/butler/discussions" aria-label="Discussion forums on GitHub">
      <i class="fa fa-comments"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Ptarmigan Labs" aria-label="Ptarmigan Labs">
    <a class="text-white" target="_blank" rel="noopener" href="https://ptarmiganlabs.com" aria-label="Ptarmigan Labs">
      <i class="fa fa-external-link"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="LinkedIn" aria-label="LinkedIn">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.linkedin.com/in/gorsan/" aria-label="LinkedIn">
      <i class="fab fa-linkedin"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/ptarmiganlabs/butler" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Bug reports &amp; Feature requests" aria-label="Bug reports &amp; Feature requests">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/ptarmiganlabs/butler/issues/new/choose" aria-label="Bug reports &amp; Feature requests">
      <i class="fa fa-bug"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Get in touch with Ptarmigan Labs" aria-label="Get in touch with Ptarmigan Labs">
    <a class="text-white" target="_blank" rel="noopener" href="mailto://info@ptarmiganlabs.com" aria-label="Get in touch with Ptarmigan Labs">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2024 Ptarmigan Labs AB All Rights Reserved</small>
        
	
		<p class="mt-2"><a href="/docs/about/">About</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
  <script src="/js/main.min.523509bf13607632997fb2eeed668872c5fb9c71c1c18f4d68e77a786fa8136f.js" integrity="sha256-UjUJvxNgdjKZf7Lu7WaIcsX7nHHBwY9NaOd6eG&#43;oE28=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
