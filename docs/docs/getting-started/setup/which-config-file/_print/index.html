<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.122.0">
<link rel="canonical" type="text/html" href="https://butler.ptarmiganlabs.com/docs/getting-started/setup/which-config-file/">
<link rel="alternate" type="application/rss&#43;xml" href="https://butler.ptarmiganlabs.com/docs/getting-started/setup/which-config-file/index.xml">
<meta name="robots" content="noindex, nofollow">
<script defer data-domain="butler.ptarmiganlabs.com" src="https://plausible.io/js/script.js"></script>



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Which config file to use | Butler</title>
<meta name="description" content="Butler can use multiple config files. Here you learn to control which one is used by Butler.
">
<meta property="og:title" content="Which config file to use" />
<meta property="og:description" content="Butler can use multiple config files. Here you learn to control which one is used by Butler.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://butler.ptarmiganlabs.com/docs/getting-started/setup/which-config-file/" />

<meta itemprop="name" content="Which config file to use">
<meta itemprop="description" content="Butler can use multiple config files. Here you learn to control which one is used by Butler.
"><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Which config file to use"/>
<meta name="twitter:description" content="Butler can use multiple config files. Here you learn to control which one is used by Butler.
"/>




<link rel="preload" href="/scss/main.min.760be0d42a95747f7072e6cf9b47cc5c5c4d7715dd765fd062712100e6b3d9d8.css" as="style">
<link href="/scss/main.min.760be0d42a95747f7072e6cf9b47cc5c5c4d7715dd765fd062712100e6b3d9d8.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-00000000-0', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name">Butler</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    
  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/getting-started/setup/which-config-file/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Which config file to use</h1>
<div class="lead">Butler can use multiple config files. Here you learn to control which one is used by Butler.</div>




    <ul>
    
  
  
  
  

  

    </ul>


<div class="content">
      <p>A description of the config file format is available <a href="/docs/reference/config-file/">here</a>.</p>
<h2 id="select-which-config-file-to-use">Select which config file to use</h2>
<p>Butler uses configuration files in YAML format.</p>
<p>A default config file called <code>production_template.yaml</code> is included in the release Zip files on the <a href="https://github.com/ptarmiganlabs/butler/releases">download page</a> (starting with version 9.3.0). It is also available in the <a href="https://github.com/ptarmiganlabs/butler/tree/master/src/config">GitHub repository</a>.</p>
<p>Make a copy of it, then rename the copy <code>default.yaml</code>, <code>production.yaml</code>, <code>staging.yaml</code> or something else suitable to your specific use case.<br>
Update it as needed (see the <a href="/docs/reference/config-file/">config file reference page</a> for details).</p>
<p>Trying to run Butler with the default config file (the one on GitHub) will not work - you must adapt it to your server environment. For example, you need to enter the IP or host name of you Sense server(s), the IP or host name where Butler is running etc.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">All config entries are mandatory</h4>

    <p>As of Butler 9.0 the config file&rsquo;s structure will be validated when Butler starts. If there are any errors (missing entries etc) in the config file, Butler will not start.</p>
<p>This means that all config file entries are mandatory. If some feature is not use the corresponding entry can be left empty.</p>


</div>

<p>Finally, Butler must somehow be given instructions about where to look for the config file.<br>
This can be done in several ways depending on how Butler is used, see below.</p>
<h3 id="config-file-for-stand-alone-butler">Config file for stand-alone Butler</h3>
<p>Let&rsquo;s run Butler on a Windows Server using PowerShell, without any options or parameters:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#204a87">PS </span><span style="color:#000">C:</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">tools</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">butler</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">.\</span><span style="color:#000">butler</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">exe</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Usage</span><span style="color:#a40000">:</span> <span style="color:#000">butler</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">options</span><span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">Butler</span> <span style="color:#000">gives</span> <span style="color:#000">superpowers</span> <span style="color:#000">to</span> <span style="color:#204a87">client-managed</span> <span style="color:#000">Qlik</span> <span style="color:#000">Sense</span> <span style="color:#000">Enterprise</span> <span style="color:#000">on</span> <span style="color:#000">Windows</span><span style="color:#000;font-weight:bold">!</span>
</span></span><span style="display:flex;"><span><span style="color:#000">Advanced</span> <span style="color:#000">reload</span> <span style="color:#000">failure</span> <span style="color:#000">alerts</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">task</span> <span style="color:#000">scheduler</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87">key-value</span> <span style="color:#000">store</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">file</span> <span style="color:#000">system</span> <span style="color:#000">access</span> <span style="color:#000">and</span> <span style="color:#000">much</span> <span style="color:#000">more</span><span style="color:#000;font-weight:bold">.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">Options</span><span style="color:#a40000">:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">-V</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">-</span><span style="color:#000">-version</span>                        <span style="color:#000">output</span> <span style="color:#000">the</span> <span style="color:#000">version</span> <span style="color:#000">number</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">-c</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">-</span><span style="color:#000">-configfile</span> <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">file</span><span style="color:#000;font-weight:bold">&gt;</span>              <span style="color:#000">path</span> <span style="color:#000">to</span> <span style="color:#000">config</span> <span style="color:#000">file</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">-l</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">-</span><span style="color:#000">-loglevel</span> <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">level</span><span style="color:#000;font-weight:bold">&gt;</span>               <span style="color:#000">log</span> <span style="color:#000">level</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">choices</span><span style="color:#a40000">:</span> <span style="color:#4e9a06">&#34;error&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;warn&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;info&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;verbose&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;debug&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;silly&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">-</span><span style="color:#000">-new-relic-account-name</span>  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">name</span><span style="color:#000;font-weight:bold">...&gt;</span>  <span style="color:#000">New</span> <span style="color:#000">Relic</span> <span style="color:#000">account</span> <span style="color:#000">name</span><span style="color:#000;font-weight:bold">.</span> <span style="color:#000">Used</span> <span style="color:#000">within</span> <span style="color:#000">Butler</span> <span style="color:#000">to</span> <span style="color:#000">differentiate</span> <span style="color:#000">between</span> <span style="color:#000">different</span> <span style="color:#000">target</span> <span style="color:#000">New</span> <span style="color:#000">Relic</span> <span style="color:#000">accounts</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">-</span><span style="color:#000">-new-relic-api-key</span> <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">...&gt;</span>         <span style="color:#000">insert</span> <span style="color:#000">API</span> <span style="color:#000">key</span> <span style="color:#000">to</span> <span style="color:#000">use</span> <span style="color:#000">with</span> <span style="color:#000">New</span> <span style="color:#000">Relic</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">-</span><span style="color:#000">-new-relic-account-id</span> <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">id</span><span style="color:#000;font-weight:bold">...&gt;</span>       <span style="color:#000">New</span> <span style="color:#000">Relic</span> <span style="color:#000">account</span> <span style="color:#000">ID</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">-</span><span style="color:#000">-test-email-address</span> <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">address</span><span style="color:#000;font-weight:bold">&gt;</span>       <span style="color:#000">send</span> <span style="color:#000">test</span> <span style="color:#000">email</span> <span style="color:#000">to</span> <span style="color:#000">this</span> <span style="color:#000">address</span><span style="color:#000;font-weight:bold">.</span> <span style="color:#000">Used</span> <span style="color:#000">to</span> <span style="color:#000">verify</span> <span style="color:#000">email</span> <span style="color:#000">settings</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">the</span> <span style="color:#000">config</span> <span style="color:#000">file</span><span style="color:#000;font-weight:bold">.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">-</span><span style="color:#000">-test-email-from-address</span> <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">address</span><span style="color:#000;font-weight:bold">&gt;</span>  <span style="color:#000">send</span> <span style="color:#000">test</span> <span style="color:#000">email</span> <span style="color:#000">from</span> <span style="color:#000">this</span> <span style="color:#000">address</span><span style="color:#000;font-weight:bold">.</span> <span style="color:#000">Only</span> <span style="color:#000">relevant</span> <span style="color:#000">when</span> <span style="color:#000">SMTP</span> <span style="color:#000">server</span> <span style="color:#000">allows</span> <span style="color:#000">from</span> <span style="color:#000">address</span> <span style="color:#000">to</span> <span style="color:#000">be</span> <span style="color:#000">set</span><span style="color:#000;font-weight:bold">.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">-</span><span style="color:#000">-no-qs-connection</span>                   <span style="color:#000">don</span><span style="color:#a40000">&#39;</span><span style="color:#000">t</span> <span style="color:#000">connect</span> <span style="color:#000">to</span> <span style="color:#000">Qlik</span> <span style="color:#000">Sense</span> <span style="color:#000">server</span> <span style="color:#000">at</span> <span style="color:#000">all</span><span style="color:#000;font-weight:bold">.</span> <span style="color:#000">Run</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">isolated</span> <span style="color:#000">mode</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">-</span><span style="color:#000">-api-rate-limit</span>                     <span style="color:#204a87">set </span><span style="color:#000">the</span> <span style="color:#000">API</span> <span style="color:#000">rate</span> <span style="color:#000">limit</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">per</span> <span style="color:#000">minute</span><span style="color:#000;font-weight:bold">.</span> <span style="color:#204a87;font-weight:bold">Default</span> <span style="color:#000">is</span> <span style="color:#0000cf;font-weight:bold">100</span> <span style="color:#000">calls</span><span style="color:#000;font-weight:bold">/</span><span style="color:#000">minute</span><span style="color:#000;font-weight:bold">.</span> <span style="color:#204a87">Set </span><span style="color:#000">to</span> <span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#000">to</span> <span style="color:#000">disable</span> <span style="color:#000">rate</span> <span style="color:#000">limiting</span><span style="color:#000;font-weight:bold">.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000">-h</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">-</span><span style="color:#000">-help</span>                           <span style="color:#000">display</span> <span style="color:#000">help</span> <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">command</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">PS </span><span style="color:#000">C:</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">tools</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">butler</span><span style="color:#000;font-weight:bold">&gt;</span>
</span></span></code></pre></div><p>There is an option <code>--configfile</code> (or its short version <code>-c</code>) that let us control which config file to use.<br>
In this example the config file <code>.\config\butler-config.yaml</code> is used.<br>
Let&rsquo;s try again with the <code>-c</code> option:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#204a87">PS </span><span style="color:#000">C:</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">tools</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">butler</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#204a87">dir
</span></span></span><span style="display:flex;"><span><span style="color:#204a87"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">Directory</span><span style="color:#a40000">:</span> <span style="color:#000">C:</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">tools</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">butler</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">Mode</span>                 <span style="color:#000">LastWriteTime</span>         <span style="color:#000">Length</span> <span style="color:#000">Name</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">----</span>                 <span style="color:#000;font-weight:bold">-------------</span>         <span style="color:#000;font-weight:bold">------</span> <span style="color:#000;font-weight:bold">----</span>
</span></span><span style="display:flex;"><span><span style="color:#000">-a</span><span style="color:#000;font-weight:bold">----</span>        <span style="color:#0000cf;font-weight:bold">20</span><span style="color:#000;font-weight:bold">/</span><span style="color:#0000cf;font-weight:bold">06</span><span style="color:#000;font-weight:bold">/</span><span style="color:#0000cf;font-weight:bold">2022</span>     <span style="color:#0000cf;font-weight:bold">16</span><span style="color:#a40000">:</span><span style="color:#0000cf;font-weight:bold">27</span>       <span style="color:#0000cf;font-weight:bold">68426646</span> <span style="color:#000">butler</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">exe</span>
</span></span><span style="display:flex;"><span><span style="color:#000">-a</span><span style="color:#000;font-weight:bold">----</span>        <span style="color:#0000cf;font-weight:bold">20</span><span style="color:#000;font-weight:bold">/</span><span style="color:#0000cf;font-weight:bold">06</span><span style="color:#000;font-weight:bold">/</span><span style="color:#0000cf;font-weight:bold">2022</span>     <span style="color:#0000cf;font-weight:bold">17</span><span style="color:#a40000">:</span><span style="color:#0000cf;font-weight:bold">17</span>          <span style="color:#0000cf;font-weight:bold">34762</span> <span style="color:#000">production</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">yaml</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">PS </span><span style="color:#000">C:</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">tools</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">butler</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">.\</span><span style="color:#000">butler</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">exe</span> <span style="color:#000">-c</span> <span style="color:#000">c:</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">tools</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">butler</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">production</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">PS </span><span style="color:#000">C:</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">tools</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">butler</span><span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">.\</span><span style="color:#000">butler</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">exe</span> <span style="color:#000">-c</span> <span style="color:#000;font-weight:bold">.\</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">\</span><span style="color:#204a87">butler-config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">yaml</span>
</span></span><span style="display:flex;"><span><span style="color:#0000cf;font-weight:bold">2023</span><span style="color:#000;font-weight:bold">-</span><span style="color:#0000cf;font-weight:bold">12</span><span style="color:#000;font-weight:bold">-</span><span style="color:#000">10T13</span><span style="color:#a40000">:</span><span style="color:#0000cf;font-weight:bold">46</span><span style="color:#a40000">:</span><span style="color:#0000cf;font-weight:bold">32</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">939Z</span> <span style="color:#000">info</span><span style="color:#a40000">:</span> <span style="color:#000">Enabled</span> <span style="color:#000">API</span> <span style="color:#000">endpoints</span><span style="color:#a40000">:</span> <span style="color:#000;font-weight:bold">[</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;apiListEnbledEndpoints&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;base62ToBase16&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;base16ToBase62&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;butlerping&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;createDir&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;createDirQVD&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;fileDelete&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;fileMove&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;fileCopy&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;keyValueStore&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;mqttPublishMessage&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;postNewRelicMetric&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#4e9a06">&#34;postNewRelicEvent&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">...</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">...</span>
</span></span></code></pre></div><p>Butler now starts nicely using the specified config file.</p>
<style type="text/css">.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:#444;background:#e7f2fa}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.notice.warning .notice-title{background:rgba(217,83,79,.9)}.notice.warning{background:#fae2e2}.notice.info .notice-title{background:#f0b37e}.notice.info{background:#fff2db}.notice.note .notice-title{background:#6ab0de}.notice.note{background:#e7f2fA}.notice.tip .notice-title{background:rgba(92,184,92,.8)}.notice.tip{background:#e6f9e6}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:0.125em;position:relative}</style>
<svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>When using the standalone Butler executables you can use an absolute or a relative path when specifying the location of the config file.</p>
<p>For example, <code>c:\tools\butler\config\butler-config.yaml</code> is an absolute path, while <code>.\config\butler-config.yaml</code> would be a relative path.</p></div>

<h3 id="config-file-when-running-butler-as-a-nodejs-app">Config file when running Butler as a Node.js app</h3>
<p>When running Butler as a Node.js app, i.e. starting it with <code>node butler.js</code>, Butler will look for a config file in the <code>./config</code> subdirectory.</p>
<p>The name of the config file matters.<br>
Butler looks for an environment variable called “NODE_ENV” and then tries to load a config file named with the value found in NODE_ENV.</p>
<p>Example: <code>NODE_ENV=production</code></p>
<p>Butler will look for a config file config/production.yaml.</p>
<h3 id="config-file-when-running-butler-in-a-docker-container">Config file when running Butler in a Docker container</h3>
<p>The <a href="https://github.com/ptarmiganlabs/butler/blob/master/docs/docker-compose/docker-compose.yaml">template docker-compose.yaml</a> file in the GitHub repository shows how to specify which config file that will be used:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># docker-compose.yml</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;3.3&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">services</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">butler</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ptarmiganlabs/butler:latest</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">container_name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">butler</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">restart</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">always</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ports</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#4e9a06">&#34;8080:8080&#34;</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#8f5902;font-style:italic"># REST API available on port 8180 to services outside the container</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#4e9a06">&#34;9998:9998/udp&#34;</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#8f5902;font-style:italic"># UDP port for task failure events</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># Make config file accessible outside of container</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#4e9a06">&#34;./config:/nodeapp/config&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#4e9a06">&#34;./log:/nodeapp/log&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">environment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#4e9a06">&#34;NODE_ENV=production&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">logging</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">driver</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">json-file</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">options</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">max-file</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;5&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">max-size</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;5m&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Here the environment variable <code>NODE_ENV</code> is set to &ldquo;production&rdquo;, and the host OS&rsquo; <code>./config</code> directory is mapped to the container&rsquo;s <code>/nodeapp/config</code> directory.</p>
<p>As there is no <code>--configfile</code> command line option present the default setting will be used, which is to look for the config file in the <code>config</code> directory right under the directory where the <code>docker-compose.yaml</code> file is located.<br>
The file name is determined by Butler (running in the container) looking at the <code>NODE_ENV</code> env variable.</p>
<p>Bottom line is that the <code>./config/production.yaml</code> (relative to the location of <code>docker-compose.yaml</code>) file will be used.</p>
<h2 id="running-several-butler-instances-in-parallel">Running several Butler instances in parallel</h2>
<p>If you have several Sense clusters (for example DEV, TEST and PROD environments) you may want to run several Butler instances.</p>
<p>The solution is to create several config files: <code>butler_dev.yaml</code>, <code>butler_test.yaml</code> and <code>butler_prod.yaml</code>.</p>
<p>In this scenario three instances of Butler should be started, each given a different config file via the <code>--configfile</code> command line option.</p>
<p>Note: If running several Butler instances in parallel, you must also ensure that each one uses unique port numbers for their respective REST APIs, UDP servers etc.</p>
<h2 id="setting-environment-variables">Setting environment variables</h2>
<p>The method for setting environment variables varies between operating systems:</p>
<p>On Windows:</p>
<pre><code>set NODE_ENV=production
</code></pre>
<p>Mac OS or Linux</p>
<pre><code>export NODE_ENV=production
</code></pre>
<p>If using Docker, the NODE_ENV environment varible is set in the docker-compose.yml file (as already done in the <a href="https://github.com/ptarmiganlabs/butler/blob/master/docs/docker-compose/docker-compose.yaml">template docker-compose file</a>.)</p>

</div>
</div>


  
  
  
  

  
  

  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="SenseOps mailing list" aria-label="SenseOps mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://ptarmiganlabs.com/#/portal/signup" aria-label="SenseOps mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Discussion forums on GitHub" aria-label="Discussion forums on GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/ptarmiganlabs/butler/discussions" aria-label="Discussion forums on GitHub">
      <i class="fa fa-comments"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Ptarmigan Labs" aria-label="Ptarmigan Labs">
    <a class="text-white" target="_blank" rel="noopener" href="https://ptarmiganlabs.com" aria-label="Ptarmigan Labs">
      <i class="fa fa-external-link"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="LinkedIn" aria-label="LinkedIn">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.linkedin.com/in/gorsan/" aria-label="LinkedIn">
      <i class="fab fa-linkedin"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/ptarmiganlabs/butler" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Bug reports &amp; Feature requests" aria-label="Bug reports &amp; Feature requests">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/ptarmiganlabs/butler/issues/new/choose" aria-label="Bug reports &amp; Feature requests">
      <i class="fa fa-bug"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Get in touch with Ptarmigan Labs" aria-label="Get in touch with Ptarmigan Labs">
    <a class="text-white" target="_blank" rel="noopener" href="mailto://info@ptarmiganlabs.com" aria-label="Get in touch with Ptarmigan Labs">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2024 Ptarmigan Labs AB All Rights Reserved</small>
        
	
		<p class="mt-2"><a href="/docs/about/">About</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
  <script src="/js/main.min.523509bf13607632997fb2eeed668872c5fb9c71c1c18f4d68e77a786fa8136f.js" integrity="sha256-UjUJvxNgdjKZf7Lu7WaIcsX7nHHBwY9NaOd6eG&#43;oE28=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
